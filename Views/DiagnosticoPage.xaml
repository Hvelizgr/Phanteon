<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             x:Class="Phanteon.Views.DiagnosticoPage"
             Title="Diagnóstico API">

    <ScrollView>
        <VerticalStackLayout
            Padding="30"
            Spacing="20">

            <!-- Título -->
            <Label
                Text="Diagnóstico de Conexión API"
                FontSize="24"
                FontAttributes="Bold"
                HorizontalOptions="Center" />

            <!-- URL de la API -->
            <Frame BorderColor="Gray" CornerRadius="10" Padding="15">
                <VerticalStackLayout Spacing="10">
                    <Label Text="URL de la API:" FontAttributes="Bold" />
                    <Label x:Name="UrlLabel"
                           Text="{Binding UrlApi}"
                           FontSize="12"
                           TextColor="DarkBlue" />
                </VerticalStackLayout>
            </Frame>

            <!-- Estado de conexión -->
            <Frame x:Name="EstadoFrame"
                   BorderColor="Gray"
                   CornerRadius="10"
                   Padding="15"
                   BackgroundColor="LightGray">
                <VerticalStackLayout Spacing="10">
                    <Label Text="Estado:" FontAttributes="Bold" />
                    <Label x:Name="EstadoLabel"
                           Text="{Binding EstadoConexion}"
                           FontSize="16"
                           FontAttributes="Bold" />
                    <Label x:Name="MensajeLabel"
                           Text="{Binding MensajeEstado}"
                           FontSize="12"
                           LineBreakMode="WordWrap" />
                </VerticalStackLayout>
            </Frame>

            <!-- Botones de prueba -->
            <Button
                Text="Probar Conexión"
                Clicked="OnProbarConexionClicked"
                BackgroundColor="#512BD4"
                TextColor="White"
                HeightRequest="50"
                CornerRadius="10" />

            <Button
                Text="Obtener Dispositivos"
                Clicked="OnObtenerDispositivosClicked"
                BackgroundColor="#2196F3"
                TextColor="White"
                HeightRequest="50"
                CornerRadius="10" />

            <Button
                Text="Obtener Alertas"
                Clicked="OnObtenerAlertasClicked"
                BackgroundColor="#FF9800"
                TextColor="White"
                HeightRequest="50"
                CornerRadius="10" />

            <!-- Resultados -->
            <Frame BorderColor="Gray" CornerRadius="10" Padding="15">
                <VerticalStackLayout Spacing="10">
                    <Label Text="Resultados:" FontAttributes="Bold" />
                    <ScrollView HeightRequest="200">
                        <Label x:Name="ResultadosLabel"
                               Text="{Binding Resultados}"
                               FontSize="12"
                               LineBreakMode="WordWrap" />
                    </ScrollView>
                </VerticalStackLayout>
            </Frame>

            <!-- Botón para volver -->
            <Button
                Text="Volver al Inicio"
                Clicked="OnVolverClicked"
                BackgroundColor="Gray"
                TextColor="White"
                HeightRequest="50"
                CornerRadius="10" />

        </VerticalStackLayout>
    </ScrollView>

</ContentPage>
